const fs = require('fs');

const louisianaBirdCodesArray = ["bbwduc","fuwduc","snogoo","rosgoo","gwfgoo","brant","cacgoo1","cangoo","truswa","tunswa","egygoo","wooduc","buwtea","cintea","norsho","gadwal","eurwig","amewig","mallar3","ambduc","motduc","norpin","gnwtea","canvas","redhea","rinduc","gresca","lessca","kineid","sursco","whwsco2","blksco2","lotduc","buffle","comgol","hoomer","commer","rebmer","masduc","rudduc","norbob","wiltur","grefla2","leagre","pibgre","horgre","rengre","eargre","wesgre","rocpig","batpig1","eucdov","incdov","cogdov","whwdov","moudov","smbani","grbani","greroa","yebcuc","mancuc","bkbcuc","lesnig","comnig","antnig","chwwid","easwpw1","chiswi","vauswi","grnvie1","gnbman","maghum1","buthum","luchum","rthhum","bkchum","annhum","calhum","rufhum","allhum","brthum","brbhum","bubhum","kinrai4","clarai11","virrai","sora","comgal1","y00475","purgal2","yelrai","blkrai","limpki","sancra","whocra","bknsti","ameavo","ameoys","bkbplo","amgplo","lesplo","snoplo5","wilplo","semplo","pipplo","killde","mouplo","uplsan","whimbr","lobcur","bktgod","hudgod","margod","rudtur","redkno","ruff","stisan","cursan","sander","dunlin","pursan","baisan","leasan","whrsan","bubsan","pecsan","semsan","wessan","shbdow","lobdow","amewoo","wilsni1","wilpha","renpha","redpha1","sposan","solsan","greyel","willet1","lesyel","pomjae","parjae","lotjae","razorb","bklkit","sabgul","bongul","bkhgul","litgul","laugul","fragul","mewgul2","ribgul","calgul","hergul","y00478","lbbgul","glagul","gbbgul","kelgul","sooter1","briter1","leater1","gubter1","caster1","blkter","comter","arcter","forter","royter1","santer1","blkski","rebtro","retloo","pacloo","comloo","wispet","lcspet","barpet","corshe","greshe","sooshe","manshe","audshe","jabiru","woosto","magfri","masboo","brnboo","refboo","norgan","anhing","doccor","neocor","amwpel","brnpel","amebit","leabit","grbher3","greegr","snoegr","libher","triher","redegr","categr","grnher","bcnher","ycnher","whiibi","gloibi","whfibi","rosspo1","blkvul","turvul","osprey","whtkit","swtkit","goleag","miskit","norhar2","shshaw","coohaw","baleag","hrshaw","whthaw","reshaw","brwhaw","swahaw","zothaw","rethaw","rolhaw","ferhaw","brnowl","flaowl","easowl1","grhowl","snoowl1","burowl","brdowl","loeowl","sheowl","rinkin1","belkin1","wilsap","yebsap","rensap","rehwoo","rebwoo","dowwoo","labwoo","recwoo","haiwoo","ivbwoo","pilwoo","norfli","y00678","amekes","merlin","perfal","prafal","monpar","olsfly","wewpew","eawpew","yebfly","acafly","aldfly","wilfly","leafly","gryfly","pasfly","corfly","easpho","saypho","verfly","ducfly","astfly","grcfly","bncfly","grekis","subfly","croslf1","trokin","coukin","caskin","weskin","easkin","grykin","sctfly","fotfly","bkcvir1","whevir","belvir","yetvir","casvir","buhvir","plsvir","phivir","warvir","reevir1","yegvir","bkwvir","logshr","blujay","clanut","amecro","fiscro","chirav","carchi","tuftit","horlar","nrwswa","purmar","brcmar1","treswa","banswa","barswa","cliswa","cavswa","ruckin","gockin","rebnut","whbnut","bnhnut","brncre","buggna","rocwre","houwre","winwre3","sedwre1","marwre","carwre","bewwre","eursta","grycat","cubthr","brnthr","sagthr","normoc","easblu","moublu","towsol","varthr","veery","gycthr","swathr","herthr","woothr","amerob","norwhe","cedwax","nutman","houspa","amepip","sprpip","evegro","houfin","purfin","casfin","redcro","pinsis","lesgol","amegfi","laplon","chclon","smilon","mcclon","casspa","bacspa","graspa","chispa","clcspa","fiespa","brespa","larspa","larbun","foxspa","daejun","whcspa","gocspa","harspa","whtspa","vesspa","lecspa","seaspa","nstspa","savspa","baispa","henspa","sonspa","linspa","swaspa","gnttow","spotow","eastow","yebcha","yehbla","boboli","wesmea","easmea","orcori","hooori","bulori","balori","scoori","rewbla","shicow","brocow","bnhcow","rusbla","brebla","comgra","botgra","grtgra","ovenbi1","woewar1","louwat","norwat","bacwar","gowwar","buwwar","bawwar","prowar","swawar","tenwar","orcwar","lucwar","naswar","virwar","conwar","macwar","mouwar","kenwar","comyel","hoowar","amered","camwar","cerwar","norpar","tropar","magwar","babwar","bkbwar","yelwar","chswar","bkpwar","btbwar","palwar","pinwar","yerwar","yetwar","prawar","btywar","towwar","herwar","btnwar","gcrwar","canwar","wlswar","refwar","paired","heptan","sumtan","scatan","westan","norcar","pyrrhu","robgro","bkhgro","blubun","blugrb1","lazbun","indbun","varbun","paibun","dickci"]

var ebirdTaxonomyArray = fs.readFileSync('eBird_Taxonomy.csv', {encoding: 'utf-8'})
  .toString() // convert Buffer to string
  .split('\n') // split string to lines
  .map(e => e.trim()) // remove white spaces for each line
  .map(e => e.split(',').map(e => e.trim())); // split each line to array

const birdsOfLA = ebirdTaxonomyArray.filter(bird => louisianaBirdCodesArray.includes(bird[2]));
// console.log(birdsOfLA);

const filteredLABirdsArray = birdsOfLA.map(bird => {
  return [bird[0], bird[1], bird[2], bird[3], bird[4], bird[8], bird[9], bird[10]];
})
// console.log(filteredLABirdsArray);

module.exports = filteredLABirdsArray;